package mail.test;/**************************************************************** *  文件名     ： SendMailTest.java *  日期         :  2012-12-26 *  Company: 上海绿岸网络科技有限公司 *  (C) Copyright Green Shore Network Technology Co.,Ltd.2012 *           		All Rights Reserved. *  注意： 本内容仅限于上海绿岸网络科技有限公司内部使用，禁止转发 ****************************************************************/import java.text.SimpleDateFormat;import java.util.Date;import org.codehaus.xfire.XFireRuntimeException;import com.hanqinet.redm.client.model.mail.BasalMailData;import com.hanqinet.redm.client.model.mail.ObjectFactory;import com.hanqinet.redm.client.services.mail.AddEmailServiceClient;import com.hanqinet.redm.client.services.mail.AddEmailServicePortType;/** * @类名: SendMailTest * @描述: TODO(...) *  * @作者: 吴君杰 * @邮件: wujunjie@iwgame.com * @日期: 2012-12-26下午12:04:45 * @版本: 1.0 */public class SendMailTest {	public static void main(String[] args) {		SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss SSS");		for (int i = 0; i < 10; i++) {			long time = System.currentTimeMillis();			System.out.print("Request:" + format.format(new Date(time)));			System.out.print("\t");			System.out.print("返回值:"+senderMailByHQ());			System.out.print("\t");			System.out.print("Response:" + format.format(new Date(System.currentTimeMillis())));			System.out.print("\t");			System.out.print("Consuming:" + (System.currentTimeMillis() - time) + "毫秒");			System.out.println("");		}	}	public static String senderMailByHQ() {		try {			ObjectFactory factory = new ObjectFactory();			BasalMailData basalMailData = factory.createBasalMailData();			Integer templateid = 2;			// 模板ID,这里需要处理,配置文件映射还是?			basalMailData.setTemplateId(factory.createBasalMailDataTemplateId(templateid));			basalMailData.setEmail(factory.createBasalMailDataEmail("335201@qq.com"));			basalMailData.setNickname(factory.createBasalMailDataNickname("335201@qq.com"));			StringBuffer buffer = new StringBuffer();			buffer.append("卡号:122342342");			buffer.append(",");			buffer.append("卡密:adfad2341");			basalMailData.setData(factory.createBasalMailDataData(buffer.toString()));			basalMailData.setDataSplit(factory.createBasalMailDataDataSplit(","));			basalMailData.setTest(false);			String ws_wsdl = "http://active.lvanmail.com:8080/smartredm/services/AddEmailService";			String ws_username = "lvanmail-ws";			String ws_password = "lvanmail-ws";			AddEmailServiceClient client = new AddEmailServiceClient(ws_wsdl);			final AddEmailServicePortType service = client.getAddEmailServiceHttpPort();			Integer ret = service.addEmail(ws_username, ws_password, basalMailData);			if (ret >= 1) {				return "OK";			} else {				// 处理返回值				return ret.toString();			}		} catch (XFireRuntimeException e) {			System.out.println("----------------");			e.printStackTrace();			throw e;		} catch (Exception e) {			System.out.println("++++++++++++++++");			e.printStackTrace();			return "other error!";		}	}}